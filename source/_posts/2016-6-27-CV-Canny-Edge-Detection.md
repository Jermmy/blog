---
title: CV-Canny边缘检测
tags: Computer Vision
---

##### 这篇文章只是简单讲讲Canny边缘检测的实现，至于Canny是谁，他的边缘检测有什么优缺点，暂未提及，所以高手请惜时绕行！在下于今年三月入行图像视觉，至目前仅三月有余，错漏之处请见谅。

### Edge

虽然说只讲实现，可还是得先知道边缘是什么东西。我一直觉得这是一个很明了浅显的问题，但老师上课的时候经常提及这个问题，所以感觉这应该是一个很基本的甚至涉及cv领域本源的问题(当然这应该是不可能的)。所谓边缘，就是有变化的地方。盗一张课件的图

![](/images/2016-6-27/屏幕快照 2016-06-27 下午10.23.48.png)

图中指出了边缘出现的四个因素，不管是颜色深浅也好，前景后景也好，阴影也好，归根到底都是因为discontinuity(不连续)，对应到数字图像里面，表现形式只有一种：颜色值发生变化，变化的地方就是边缘。能够稳定地找出真正的边缘而尽量不受噪声的影响，是判断一个检测算法好坏的关键(所谓噪声指的应该是那些比较浅、弱的边缘，这些边缘可能变化幅度偏小，比如上图中地阴影部分显然就是我们不想要的噪声，当然实际情况复杂得多，这也导致很多检测算法各有千秋)。

### Canny边缘检测

Canny检测算法提出的时间追溯到1986年，在图像处理界算是后起之秀。之所以说它秀，是因为这种方法受噪声影响小，能检测出真正的弱边缘(这话是别人说的，我并不知道为什么)，但在CV界Canny算子是最受欢迎的算法。Canny检测分4个步骤进行：

1. 高斯滤波去除噪声；
2. 找出图像的梯度gradient；
3. 非极大值抑制去除无效的边(这是让检测出来的边缘更“瘦”，尽量只由一个个像素连接而成)；
4. 用滞后阈值(或者说双阈值)将边缘连接起来(因为有些弱边可能在前面被忽视了，这大概是canny可以检测出弱边的原因)；

#### 1. 高斯滤波平滑

相信会看这篇文章的人都知道怎么回事，这一步不再叙述。阮一峰的[这篇文章](http://www.ruanyifeng.com/blog/2012/11/gaussian_blur.html)很浅显易懂。

#### 2. 找出梯度

对于刚刚学图像的人来说，这一块应该是最难理解。导数？卷积？(除非我属于拉低智商平均数的群体)。我们之前说，边缘出现在变化的地方，而数学里的导数就是反应变化的概念。再次盗一张课件的图：

 ![](/images/2016-6-27/屏幕快照 2016-06-27 下午11.33.01.png)



如果我们只看x轴方向的梯度，根据导数的定义，就是(f(x+1, y)-f(x, y))/1，当然，高数里的导数是相对极限而言的，但数字信号是离散的，所以我们用一个像素表示最小单位，这样上式就是f(x, y)在x这一点的朝x方向的导数。如果前后像素值差的越多，导数值就越大，如果像素值很接近，导数值就越小，最后被当作边缘的概率就越小(要知道边缘就是很多像素点的导数值组成的)。

未完待续。。。。