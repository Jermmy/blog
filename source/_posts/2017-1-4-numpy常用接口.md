---
title: numpy常用接口
date: 2017-01-04 22:27:03
tags: [Python]
categories: Python
---

### numpy.ndarray

> numpy.ndarray(shape, dtype=None, buffer=None, offset=0, strides=None, order=None)

This is an array object represents a multidimensional array of fixed-size items（Fixed-size 意味着数组一旦创建就没法修改了）。

1. shape: tuple of ints（除了该参数必须之外，其余为可选）；
2. dtype: data-type
3. buffer: object exposing buffer interface, used to fill the array with data.
4. offset: int, offset of array data in buffer.
5. strides: tuple of ints, strides of data in memory.
6. order: {'C', 'F'}, row-major (C-style) or column-major (Fortran-style).

注：

1. 如果 buffer 是 None，则只有 Shape、dtype、 order 是需要的。
2. 如果 buffer 不是 None，则所有参数都会用到。
3. buffer 的 dtype 和 ndarray 的 dtype 要保持一致。

```python
>>> m = np.ndarray(shape=(2, 3), dtype=np.int32, buffer=np.array([1,2,3,4,5,6], dtype=np.int32))
>>> m
[[1 2 3]
 [4 5 6]]
```

### numpy.allclose()

> numpy.allclose(a, b, rtol=1e-05, atol=1e-08, equal_nan=False)

Returns True if two arrays are element-wise equal within a tolerance.

### numpy.arange()

> numpy.arange([start,] stop, [step, ] dtype=None)

Returns an ndarray in range [start, stop)

e.g. 

```python
>>> np.arange(3)
array([0, 1, 2])
>>> np.arange(3.0)
array([ 0.,  1.,  2.])
>>> np.arange(3,7)
array([3, 4, 5, 6])
>>> np.arange(3,7,2)
array([3, 5])
```

与python内置的range和xrange的比较：

`range()`多用于循环，会返回一个list。`xrange()`也多用于循环，但不返回list，而是类似generator，每次返回一个元素，因此内存开销更小。

### numpy.asmatrix()

> numpy.asmatrix(data, dtype=None)

Interprete the input as a matrix, does not make a copy if the input is already a matrix or an ndarray.

Returns numpy matrix.

```python
>>> x = np.array([[1, 2], [3, 4]])
>>> m = np.asmatrix(x)
>>> x[0,0] = 5
>>> m
matrix([[5, 2],
        [3, 4]])
```

### numpy.random.permutation

> numpy.random.permutation(x)

Randomly permute a sequence, or return a permuted range.

1. Parameters

   x: int or array_like. If x is an integer, randomly permute np.arange(x). If x is an array, make a copy and shuffle the elements randomly.

2. Returns

   out: ndarray. Permuted sequence or array range.

```python
>>> permutation = np.random.permutation(np.array((1,2,3,4,5)))
>>> permutation
array([2, 4, 3, 5, 1])
```







